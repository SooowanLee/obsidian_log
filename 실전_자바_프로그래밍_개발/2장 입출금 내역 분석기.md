---
시작일: 2024-07-19
tags:
  - 자바
  - 실전
---
## 2.5 코드 유지보수성과 안티 패턴
> 코드를 작성할때는 **유지보수**를 생각하면서 작성해야한다. 

### 안티패턴
- 한 개의 거대한 **갓 클래스** 떄문에 코드를 이해하기 어렵다.
- **코드 중복** 때문에 코드가 불안정하고 변화에 쉽게 망가진다.

### 구현하는 코드가 가졌으면 하는 속성
- 특정 기능을 담당하는 코드를 쉽게 찾을 수 있어야 한다.
- 코드가 어떤 일을 수행하는지 쉽게 이해할 수 있어야 한다.
- 새로운 기능을 쉽게 추가하거나 기존 기능을 쉽게 제거할 수 있어야 한다.
- **캡술화**가 잘 되어 있어야 한다.
	- 사용자에게 세부 구현 내용이 감춰져 있으므로 사용자가 쉽게 코드를 이해하고, 기능을 바꿀 수 있어야 한다.

#### 갓 클래스
한 개의 파일에 모든 코드를 구현하다보면 거대한 클래스가 탄생하게 된다.
문제점은 거대한 클래스가 어떤일을 하는 것인지 정확히 알수가 없다. 목적을 잃게된다.
기존 코드의 로직을 갱신해야 한다면, 어떻게 이 코드를 찾아서 바꿀 수 있을까? 이런 문제를 **갓 클래스 안티 패턴**이라 부른다. **단일책임원칙을 사용하며 코드를 짠다면 갓 클래스를 만드는 것을 피할 수 있다.**


### 단일 책임 원칙
> SRP은 쉽게 관리하고 유지보수하는 코드를 구현하는 데 도움을 주는 포괄적인 소프트웨어 개발 지침

- 한 클래스는 한 기능만 책임진다.
- 클래스가 바뀌어야 하는 이유는 오직 하냐여야 한다.

SRP는 일반적으로 클래스와 메서드에 적용한다. SRP는 한 가지 특정 동작, 개념, 카테고리와 관련된다.
메서드를 구현할 대는 **놀람 최소화 원칙(principle of least surprise)** 을 따라야 한다. 그래야 코드를 보고 무슨 일이 일어나는지 명확히 이해할 수 있기 때문이다.

- 메서드가 수행하는 일을 바로 이해할 수 있도록 메서드명을 명확하게 지어야 한다.
	- calculateTotalAmount() 이름만 봐도 총 수입을 계산하는 것으로 보인다.
- 코드의 다른 부분이 파라미터의 상태에 의존할 수 있으므로 파라미터의 상태를 바꾸지 않는다.

무엇보다 중요한 것은 확신이 서지 않는다면 다른 동료와 상의하는 것이 제일 좋다.


### 응집도(cohesion)
>코드 유지보수성을 결정하는 중요한 개념으로 코드가 서로 어떻게 관련되어 있는지를 가리킨다.
>클래스나 메서드의 책임이 서로 얼마나 강하게 연결되어 있는지를 측정한다.


### 클래스 수준 응집도
실무에서는 일반적으로 다음과 같은 여섯 가지 방법으로 그룹화한다.
- 기능
- 정보
- 유틸리티
- 논리
- 순차
- 시간

#### 기능
BankStatementCSVParser를 구현할 때 기능이 비슷한 메서드를 그룹화했다. parseFrom()메서드를 parseLinesFrom()에서 내부적으로 사용한다. 이렇게 함께 사용하는 메서드를 그룹화하면 찾기도 쉽고 이해하기도 쉬우므로 응집도를 높인다. 

**단점**
- **클래스의 수 증가**: 하나의 메서드만 갖는 매우 간단한 클래스들이 과도하게 많이 생성될 수 있다.
	- 코드가 장황해지고 복잡해질 수 있다.


### 개방/폐쇄 원칙
> 소프트웨어 엔티티(클래스, 모듈, 함수 등)는 **확장에는 열려 있어야 하고, 수정에는 닫혀 있어야 한다**

새로운 기능을 추가할 때 기존 코드를 변경하지 않고 확장할 수 있어야 한다.
이를 구현하기 위해서 주로 상속과 다형성을 활용합니다.

#### 장점
- 기존 코드를 바꾸지 않으므로 기존 코드 잘못될 가능성이 줄어든다.
- 코드가 중복되지 않으므로 기존 코드의 재사용성이 높아진다.
- 결합도가 낮아지므로 코드 유지보수성이 좋아진다.
